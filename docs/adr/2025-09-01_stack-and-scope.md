### ADR: 技术栈与范围约束（V1）

- **日期**：2025-09-01
- **状态**：已采纳

#### 背景
来自业务方的补充信息，需对原方案进行约束调整。

#### 决策
- **后端语言/框架**：Java + Spring Boot，单体架构（非微服务）。
- **数据库**：MySQL；表名与字段名一律驼峰（小驼峰），使用 InnoDB，事务隔离 REPEATABLE READ。
- **缓存**：Redis；会话、热点数据、分布式锁、幂等键。
- **对象存储**：MinIO；用于图片、导出报表、日志归档等。
- **前端**：微信小程序（用户端）。后台 Web 采用 Element-UI 风格原型。
- **部署**：Docker。运行宿主为 Windows（开发/部署环境均需适配）。
- **对接项**：
  - 设备监控模块：仅对接既有系统（Webhook/REST/MQTT），我们不自研。
  - 支付模块：仅对接（微信/支付宝），不自研钱包与收银核心。

#### 取舍
- 单体架构降低复杂度，牺牲部分服务级别扩展性；通过模块化与分层设计保留拆分空间。
- 以对接为主减少建设周期，但需加强幂等、回放与对账能力。

#### 影响面
- 数据模型中仍保留订单与支付记录（第三方回执），但不维护内部余额账户。
- 设备侧仅保存状态与会话关联 ID，不承担硬件控制闭环。

#### 回滚策略
若后续需要服务化，可从单体中抽离 `payment-integration`、`device-integration`、`order` 等模块为独立服务。