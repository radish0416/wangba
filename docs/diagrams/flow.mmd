%% 系统业务流程图（Mermaid Flowchart）
%% 说明：设备监控与支付为对接项，不在本项目内实现

flowchart TD
  %% 客户端
  A[用户/客户] -->|Web 端 (Element-UI)| B[前端 Web 应用]
  A -->|微信小程序| C[小程序]

  %% 网关/控制器
  B --> D[Spring Boot 控制器层]
  C --> D

  %% 业务服务
  D --> E[领域服务/应用服务]

  %% 数据与基础设施
  E --> F[(MySQL 数据库)]
  E --> G[(Redis 缓存)]
  E --> H[(MinIO 对象存储)]

  %% 外部系统对接
  E --> I[支付服务提供商 (对接)]
  E --> J[设备监控系统 (对接)]

  %% 典型流程：下单与支付
  subgraph 下单与支付
    B --> K[下单提交]
    K --> D
    D --> E
    E --> F
    E -->|生成支付单| I
    I -->|回调| D
    D --> E
    E --> F
  end

  %% 典型流程：文件上传
  subgraph 文件上传
    B --> L[上传商品/头像]
    L --> D
    D --> E
    E --> H
    E --> F
  end

  %% 典型流程：库存查询
  subgraph 库存查询
    C --> M[查看商品库存]
    M --> D
    D --> E
    E --> G
    E --> F
  end

