<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cybercafe.repository.mapper.OrderMasterMapper">

  <!-- 结果映射 -->
<resultMap id="BaseResultMap" type="com.cybercafe.domain.po.OrderMasterPO">
  <id column="id" property="id"/>
  <result column="storeId" property="storeId"/>
  <result column="userId" property="userId"/>
  <result column="orderType" property="orderType"/>
  <result column="status" property="status"/>
  <result column="totalAmount" property="totalAmount"/>
  <result column="discountAmount" property="discountAmount"/>
  <result column="payAmount" property="payAmount"/>
  <result column="payChannel" property="payChannel"/>
  <result column="payTime" property="payTime"/>
  <result column="externalNo" property="externalNo"/>
  <result column="seatId" property="seatId"/>
  <result column="sourceChannel" property="sourceChannel"/>
  <result column="remark" property="remark"/>
  <result column="createBy" property="createBy"/>
  <result column="createTime" property="createTime"/>
  <result column="updateBy" property="updateBy"/>
  <result column="updateTime" property="updateTime"/>
  <result column="ext1" property="ext1"/>
  <result column="ext2" property="ext2"/>
  <result column="ext3" property="ext3"/>
  <result column="ext4" property="ext4"/>
  <result column="ext5" property="ext5"/>
</resultMap>

  <!-- 动态查询（分页与全量共用） -->
  <select id="selectByDynamic" resultMap="BaseResultMap">
    SELECT `id`, `storeId`, `userId`, `orderType`, `status`, `totalAmount`, `discountAmount`, `payAmount`, `payChannel`, `payTime`, `externalNo`, `seatId`, `sourceChannel`, `remark`, `createBy`, `createTime`, `updateBy`, `updateTime`, `ext1`, `ext2`, `ext3`, `ext4`, `ext5` FROM `order_master`
  <where>
    <if test="dto.id != null and dto.id != ''">
      AND `id` = #{dto.id}
    </if>
    <if test="dto.storeId != null and dto.storeId != ''">
      AND `storeId` = #{dto.storeId}
    </if>
    <if test="dto.userId != null and dto.userId != ''">
      AND `userId` = #{dto.userId}
    </if>
    <if test="dto.orderType != null and dto.orderType != ''">
      AND `orderType` = #{dto.orderType}
    </if>
    <if test="dto.status != null and dto.status != ''">
      AND `status` = #{dto.status}
    </if>
    <if test="dto.totalAmount != null and dto.totalAmount != ''">
      AND `totalAmount` = #{dto.totalAmount}
    </if>
    <if test="dto.discountAmount != null and dto.discountAmount != ''">
      AND `discountAmount` = #{dto.discountAmount}
    </if>
    <if test="dto.payAmount != null and dto.payAmount != ''">
      AND `payAmount` = #{dto.payAmount}
    </if>
    <if test="dto.payChannel != null and dto.payChannel != ''">
      AND `payChannel` = #{dto.payChannel}
    </if>
    <if test="dto.payTime != null and dto.payTime != ''">
      AND `payTime` = #{dto.payTime}
    </if>
    <if test="dto.externalNo != null and dto.externalNo != ''">
      AND `externalNo` = #{dto.externalNo}
    </if>
    <if test="dto.seatId != null and dto.seatId != ''">
      AND `seatId` = #{dto.seatId}
    </if>
    <if test="dto.sourceChannel != null and dto.sourceChannel != ''">
      AND `sourceChannel` = #{dto.sourceChannel}
    </if>
    <if test="dto.remark != null and dto.remark != ''">
      AND `remark` = #{dto.remark}
    </if>
    <if test="dto.createBy != null and dto.createBy != ''">
      AND `createBy` = #{dto.createBy}
    </if>
    <if test="dto.createTime != null and dto.createTime != ''">
      AND `createTime` = #{dto.createTime}
    </if>
    <if test="dto.updateBy != null and dto.updateBy != ''">
      AND `updateBy` = #{dto.updateBy}
    </if>
    <if test="dto.updateTime != null and dto.updateTime != ''">
      AND `updateTime` = #{dto.updateTime}
    </if>
    <if test="dto.ext1 != null and dto.ext1 != ''">
      AND `ext1` = #{dto.ext1}
    </if>
    <if test="dto.ext2 != null and dto.ext2 != ''">
      AND `ext2` = #{dto.ext2}
    </if>
    <if test="dto.ext3 != null and dto.ext3 != ''">
      AND `ext3` = #{dto.ext3}
    </if>
    <if test="dto.ext4 != null and dto.ext4 != ''">
      AND `ext4` = #{dto.ext4}
    </if>
    <if test="dto.ext5 != null and dto.ext5 != ''">
      AND `ext5` = #{dto.ext5}
    </if>
  </where>
    ORDER BY id DESC
  </select>

  <!-- 详情查询 -->
  <select id="selectDetail" resultMap="BaseResultMap">
    SELECT `id`, `storeId`, `userId`, `orderType`, `status`, `totalAmount`, `discountAmount`, `payAmount`, `payChannel`, `payTime`, `externalNo`, `seatId`, `sourceChannel`, `remark`, `createBy`, `createTime`, `updateBy`, `updateTime`, `ext1`, `ext2`, `ext3`, `ext4`, `ext5` FROM `order_master` WHERE id = #{id}
  </select>
</mapper>
